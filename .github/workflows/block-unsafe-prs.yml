name: Block Unsafe PRs to Main

on:
  pull_request:
    branches:
      - main

jobs:
  prevent-unsafe-prs:
    runs-on: ubuntu-latest
    steps:
      - name: Check PR Source Branch
        run: |
          echo "üîç Checking if PR comes from 'preprod'..."
          echo "PR head: ${{ github.head_ref }}"
          if [[ "${{ github.head_ref }}" != "preprod" ]]; then
            echo "‚ùå Pull requests to 'main' are only allowed from 'preprod'!"
            exit 1
          else
            echo "‚úÖ PR source branch is 'preprod' ‚Äî proceeding."
          fi
